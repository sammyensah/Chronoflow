<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronoFlow - Assistant Planning IA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Crimson+Pro:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Multi-step Onboarding Modal -->
    <div class="modal onboarding-modal show" id="onboardingModal">
        <div class="modal-content onboarding-content">
            <!-- Step 1: Profile -->
            <div class="onboarding-step active" data-step="1">
                <div class="onboarding-header">
                    <h1>‚ö° Bienvenue sur ChronoFlow</h1>
                    <p>Cr√©ons ton profil intelligent</p>
                </div>
                <div class="onboarding-body">
                    <div class="profile-setup">
                        <div class="avatar-upload">
                            <div class="avatar-preview" id="avatarPreview">üì∏</div>
                            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                            <button class="avatar-btn" onclick="document.getElementById('avatarInput').click()">
                                Choisir une photo
                            </button>
                        </div>
                        <div class="form-group">
                            <label>Ton pr√©nom *</label>
                            <input type="text" id="onboardingName" placeholder="Ex: Marie" required>
                        </div>
                        <div class="form-group">
                            <label>Email (optionnel)</label>
                            <input type="email" id="onboardingEmail" placeholder="marie@exemple.com">
                        </div>
                    </div>
                    <button class="btn-primary" onclick="nextOnboardingStep(2)">Suivant ‚Üí</button>
                </div>
            </div>

            <!-- Step 2: Template Choice -->
            <div class="onboarding-step" data-step="2">
                <div class="onboarding-header">
                    <h1>üéØ Quel est ton profil ?</h1>
                    <p>Choisis un template pour d√©marrer plus vite</p>
                </div>
                <div class="onboarding-body">
                    <div class="template-choice">
                        <div class="template-option" data-template="student">
                            <div class="template-icon">üéì</div>
                            <h3>√âtudiant</h3>
                            <p>Cours, r√©visions, examens</p>
                            <button class="btn-secondary" onclick="selectTemplate('student')">Choisir</button>
                        </div>
                        <div class="template-option" data-template="worker">
                            <div class="template-icon">üíº</div>
                            <h3>Travailleur</h3>
                            <p>Travail, projets, r√©unions</p>
                            <button class="btn-secondary" onclick="selectTemplate('worker')">Choisir</button>
                        </div>
                        <div class="template-option" data-template="none">
                            <div class="template-icon">‚ú®</div>
                            <h3>Personnalis√©</h3>
                            <p>Je configure moi-m√™me</p>
                            <button class="btn-secondary" onclick="selectTemplate('none')">Choisir</button>
                        </div>
                    </div>
                    <button class="btn-text" onclick="prevOnboardingStep(1)">‚Üê Retour</button>
                </div>
            </div>

            <!-- Step 3: Student Template Config -->
            <div class="onboarding-step" data-step="3-student">
                <div class="onboarding-header">
                    <h1>üéì Configuration √âtudiant</h1>
                    <p>Renseigne ton emploi du temps</p>
                </div>
                <div class="onboarding-body">
                    <div class="schedule-config">
                        <h3>Tes cours</h3>
                        <p class="help-text">Exemple: Lundi 8h-10h Maths, 10h-12h Physique</p>
                        <div id="coursesContainer">
                            <div class="course-row">
                                <select class="day-select">
                                    <option value="1">Lundi</option>
                                    <option value="2">Mardi</option>
                                    <option value="3">Mercredi</option>
                                    <option value="4">Jeudi</option>
                                    <option value="5">Vendredi</option>
                                    <option value="6">Samedi</option>
                                </select>
                                <input type="time" class="time-input" placeholder="D√©but">
                                <input type="time" class="time-input" placeholder="Fin">
                                <input type="text" class="subject-input" placeholder="Mati√®re">
                                <button class="btn-icon" onclick="removeCourseRow(this)">üóëÔ∏è</button>
                            </div>
                        </div>
                        <button class="btn-secondary" onclick="addCourseRow()">+ Ajouter un cours</button>
                        
                        <h3 style="margin-top: 2rem;">Pr√©f√©rences de r√©vision</h3>
                        <div class="form-group">
                            <label>Dur√©e id√©ale d'une session</label>
                            <select id="sessionDuration">
                                <option value="60">1 heure</option>
                                <option value="90" selected>1h30</option>
                                <option value="120">2 heures</option>
                                <option value="180">3 heures</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Moment pr√©f√©r√© pour r√©viser</label>
                            <select id="preferredTime">
                                <option value="morning">Matin (8h-12h)</option>
                                <option value="afternoon" selected>Apr√®s-midi (14h-18h)</option>
                                <option value="evening">Soir (18h-21h)</option>
                            </select>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="btn-text" onclick="prevOnboardingStep(2)">‚Üê Retour</button>
                        <button class="btn-primary" onclick="completeOnboarding()">Terminer üöÄ</button>
                    </div>
                </div>
            </div>

            <!-- Step 3: Worker Template Config -->
            <div class="onboarding-step" data-step="3-worker">
                <div class="onboarding-header">
                    <h1>üíº Configuration Travailleur</h1>
                    <p>D√©finis ton emploi du temps de travail</p>
                </div>
                <div class="onboarding-body">
                    <div class="form-group">
                        <label>Horaires de travail</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="font-size: 0.85rem;">D√©but</label>
                                <input type="time" id="workStart" value="09:00">
                            </div>
                            <div>
                                <label style="font-size: 0.85rem;">Fin</label>
                                <input type="time" id="workEnd" value="18:00">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Jours travaill√©s</label>
                        <div class="days-checkboxes">
                            <label><input type="checkbox" checked> Lun</label>
                            <label><input type="checkbox" checked> Mar</label>
                            <label><input type="checkbox" checked> Mer</label>
                            <label><input type="checkbox" checked> Jeu</label>
                            <label><input type="checkbox" checked> Ven</label>
                            <label><input type="checkbox"> Sam</label>
                            <label><input type="checkbox"> Dim</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pause d√©jeuner</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <input type="time" id="lunchStart" value="12:00">
                            <input type="time" id="lunchEnd" value="13:00">
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="btn-text" onclick="prevOnboardingStep(2)">‚Üê Retour</button>
                        <button class="btn-primary" onclick="completeOnboarding()">Terminer üöÄ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container" style="display: none;" id="appContainer">
        <!-- Compact Header -->
        <header class="header-compact">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>
                <div class="logo-compact">
                    <span class="logo-icon">‚ö°</span>
                    <h1>ChronoFlow</h1>
                </div>
            </div>
            <div class="header-right">
                <button class="theme-toggle" id="themeToggle">üåô</button>
                <div class="streak-compact">
                    <span class="streak-icon">üî•</span>
                    <span class="streak-value" id="headerStreak">0</span>
                </div>
                <button class="profile-btn" id="profileBtn">
                    <img src="" alt="" id="headerAvatar" style="display: none;">
                    <span id="headerAvatarFallback">üë§</span>
                </button>
            </div>
        </header>

        <div class="main-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <nav class="nav-menu">
                    <button class="nav-item active" data-view="planning">
                        <span class="nav-icon">üìã</span>
                        <span class="nav-label">Planning</span>
                    </button>
                    <button class="nav-item" data-view="calendar">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-label">Calendrier</span>
                    </button>
                    <button class="nav-item" data-view="insights">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-label">Insights</span>
                    </button>
                    <button class="nav-item" data-view="templates">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-label">Templates</span>
                    </button>
                    <button class="nav-item" data-view="badges">
                        <span class="nav-icon">üèÜ</span>
                        <span class="nav-label">Badges</span>
                    </button>
                </nav>

                <div class="sidebar-section">
                    <h3>Synchronisation</h3>
                    <button class="sync-btn" id="syncGoogle" data-platform="google">
                        <span class="sync-icon">üìó</span>
                        <span>Google Calendar</span>
                        <span class="sync-status"></span>
                    </button>
                    <button class="sync-btn" id="syncApple" data-platform="apple">
                        <span class="sync-icon">üçé</span>
                        <span>Apple Calendar</span>
                        <span class="sync-status"></span>
                    </button>
                    <button class="sync-btn" id="syncNotion" data-platform="notion">
                        <span class="sync-icon">üìù</span>
                        <span>Notion</span>
                        <span class="sync-status"></span>
                    </button>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="content-main">
                <!-- AI Input -->
                <div class="ai-input-container" id="aiInputContainer">
                    <div class="input-box">
                        <textarea 
                            id="aiInput" 
                            placeholder="Exemple: 'J'ai une √©val de maths dans 3 jours et j'ai rien r√©vis√©'
'Voir mes amis samedi soir'
'Sport 3 fois cette semaine'"
                            rows="3"
                        ></textarea>
                        <div class="input-actions">
                            <div class="quick-tags" id="quickTags">
                                <button class="tag-btn" data-tag="üò¥ Fatigu√©">üò¥</button>
                                <button class="tag-btn" data-tag="üìö Examen urgent">üìö</button>
                                <button class="tag-btn" data-tag="üë• Amis">üë•</button>
                                <button class="tag-btn" data-tag="üèÉ Sport">üèÉ</button>
                                <button class="tag-btn" data-tag="‚öñÔ∏è √âquilibre">‚öñÔ∏è</button>
                            </div>
                            <button class="btn-generate" id="generateBtn">
                                <span id="generateText">G√©n√©rer mon planning</span>
                                <span class="btn-icon">‚ú®</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Views Container -->
                <div class="views-container">
                    <!-- Planning View -->
                    <div class="view active" id="planningView">
                        <div class="view-header">
                            <h2>Mon Planning</h2>
                            <div class="view-controls">
                                <button class="control-btn" id="prevWeek">‚Üê</button>
                                <span class="period-label" id="periodLabel">Cette semaine</span>
                                <button class="control-btn" id="nextWeek">‚Üí</button>
                            </div>
                        </div>

                        <div class="priority-legend">
                            <span class="legend-label">Priorit√©s :</span>
                            <span class="priority-tag critical">üî¥ Critique</span>
                            <span class="priority-tag high">üü† Haute</span>
                            <span class="priority-tag medium">üü° Moyenne</span>
                            <span class="priority-tag low">üü¢ Basse</span>
                        </div>

                        <div class="planning-grid" id="planningGrid">
                            <div class="empty-state">
                                <div class="empty-icon">üìÖ</div>
                                <h3>Ton planning est vide</h3>
                                <p>Utilise l'assistant IA pour planifier tes journ√©es</p>
                            </div>
                        </div>

                        <div class="events-sections">
                            <div class="events-section">
                                <h3>üìç Aujourd'hui</h3>
                                <div class="events-list" id="todayEvents">
                                    <p class="empty-text">Aucun √©v√©nement aujourd'hui</p>
                                </div>
                            </div>
                            <div class="events-section">
                                <h3>üìÖ √Ä venir</h3>
                                <div class="events-list" id="upcomingEvents">
                                    <p class="empty-text">Aucun √©v√©nement √† venir</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar View - Monthly -->
                    <div class="view" id="calendarView">
                        <div class="view-header">
                            <h2>Calendrier</h2>
                            <div class="view-controls">
                                <button class="control-btn" id="calPrevMonth">‚Üê</button>
                                <span class="period-label" id="calMonthLabel">F√©vrier 2026</span>
                                <button class="control-btn" id="calNextMonth">‚Üí</button>
                            </div>
                        </div>
                        <div class="monthly-calendar" id="monthlyCalendar">
                            <!-- Generated dynamically -->
                        </div>
                    </div>

                    <!-- Insights View -->
                    <div class="view" id="insightsView">
                        <div class="view-header">
                            <h2>Insights IA üìä</h2>
                        </div>
                        <div class="insights-content" id="insightsContent">
                            <!-- Generated dynamically -->
                        </div>
                    </div>

                    <!-- Templates View -->
                    <div class="view" id="templatesView">
                        <div class="view-header">
                            <h2>Mes Templates</h2>
                        </div>
                        <div class="templates-content" id="templatesContent">
                            <!-- Generated dynamically -->
                        </div>
                    </div>

                    <!-- Badges View -->
                    <div class="view" id="badgesView">
                        <div class="view-header">
                            <h2>Badges üèÜ</h2>
                        </div>
                        <div class="streak-display">
                            <div class="streak-flame">üî•</div>
                            <div class="streak-info">
                                <h3><span id="streakDays">0</span> jours de suite</h3>
                                <p id="streakMessage">Utilise l'app chaque jour !</p>
                            </div>
                        </div>
                        <div class="badges-grid" id="badgesGrid"></div>
                    </div>

                    <!-- Profile View -->
                    <div class="view" id="profileView">
                        <div class="view-header">
                            <h2>Mon Profil</h2>
                        </div>
                        <div class="profile-content">
                            <div class="profile-card">
                                <div class="profile-avatar-large">
                                    <img src="" alt="" id="profileAvatar" style="display: none;">
                                    <span id="profileAvatarFallback">üë§</span>
                                </div>
                                <h3 id="profileName">Utilisateur</h3>
                                <p id="profileEmail"></p>
                            </div>
                            <div class="profile-stats">
                                <div class="stat-box">
                                    <span class="stat-value" id="totalEvents">0</span>
                                    <span class="stat-label">√âv√©nements</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-value" id="profileStreak">0</span>
                                    <span class="stat-label">Jours de suite</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-value" id="totalHours">0</span>
                                    <span class="stat-label">Heures</span>
                                </div>
                            </div>
                            <div class="profile-settings">
                                <h3>Param√®tres</h3>
                                <div class="form-group">
                                    <label>Nom</label>
                                    <input type="text" id="profileNameInput">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="profileEmailInput">
                                </div>
                                <div class="form-group">
                                    <label>Photo de profil</label>
                                    <input type="file" id="profileAvatarInput" accept="image/*">
                                </div>
                                <button class="btn-primary" id="saveProfile">Sauvegarder</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="workloadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="workloadTitle">‚ö†Ô∏è Attention</h2>
            </div>
            <div class="modal-body">
                <p id="workloadMessage"></p>
                <div class="modal-actions">
                    <button class="btn-secondary" id="workloadKeep">Garder</button>
                    <button class="btn-primary" id="workloadAdjust">Ajuster</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="syncModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Synchronisation</h2>
            </div>
            <div class="modal-body">
                <div class="sync-progress">
                    <div class="sync-spinner"></div>
                    <p id="syncMessage">En cours...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span class="toast-icon">‚ú®</span>
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>L'IA analyse ta demande...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

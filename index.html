<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronoFlow - Assistant Planning IA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Crimson+Pro:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Onboarding Modal (First time) -->
    <div class="modal onboarding-modal" id="onboardingModal">
        <div class="modal-content onboarding-content">
            <div class="onboarding-header">
                <h1>‚ö° Bienvenue sur ChronoFlow</h1>
                <p>Ton assistant planning intelligent</p>
            </div>
            <div class="onboarding-body">
                <div class="onboarding-step active" data-step="1">
                    <h2>Cr√©ons ton profil</h2>
                    <div class="profile-setup">
                        <div class="avatar-upload">
                            <div class="avatar-preview" id="avatarPreview">üì∏</div>
                            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                            <button class="avatar-btn" onclick="document.getElementById('avatarInput').click()">
                                Choisir une photo
                            </button>
                        </div>
                        <div class="form-group">
                            <label>Ton pr√©nom</label>
                            <input type="text" id="onboardingName" placeholder="Ex: Marie" required>
                        </div>
                        <div class="form-group">
                            <label>Email (optionnel)</label>
                            <input type="email" id="onboardingEmail" placeholder="marie@exemple.com">
                        </div>
                    </div>
                    <button class="btn-primary" onclick="completeOnboarding()">C'est parti ! üöÄ</button>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Compact Header -->
        <header class="header-compact">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle">
                    <span class="toggle-icon">‚ò∞</span>
                </button>
                <div class="logo-compact">
                    <span class="logo-icon">‚ö°</span>
                    <h1>ChronoFlow</h1>
                </div>
            </div>
            <div class="header-right">
                <button class="theme-toggle" id="themeToggle" title="Mode sombre">
                    <span class="theme-icon">üåô</span>
                </button>
                <div class="streak-compact">
                    <span class="streak-icon">üî•</span>
                    <span class="streak-value" id="headerStreak">0</span>
                </div>
                <button class="profile-btn" id="profileBtn" title="Mon profil">
                    <img src="" alt="" id="headerAvatar" style="display: none;">
                    <span id="headerAvatarFallback">üë§</span>
                </button>
            </div>
        </header>

        <div class="main-layout">
            <!-- Collapsible Sidebar -->
            <aside class="sidebar" id="sidebar">
                <nav class="nav-menu">
                    <button class="nav-item active" data-view="planning">
                        <span class="nav-icon">üìã</span>
                        <span class="nav-label">Planning</span>
                    </button>
                    <button class="nav-item" data-view="calendar">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-label">Calendrier</span>
                    </button>
                    <button class="nav-item" data-view="insights">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-label">Insights</span>
                    </button>
                    <button class="nav-item" data-view="templates">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-label">Templates</span>
                    </button>
                    <button class="nav-item" data-view="badges">
                        <span class="nav-icon">üèÜ</span>
                        <span class="nav-label">Badges</span>
                    </button>
                </nav>

                <div class="sidebar-section">
                    <h3>Synchronisation</h3>
                    <button class="sync-btn" id="syncGoogle" data-platform="google">
                        <span class="sync-icon">üìó</span>
                        <span>Google Calendar</span>
                        <span class="sync-status"></span>
                    </button>
                    <button class="sync-btn" id="syncApple" data-platform="apple">
                        <span class="sync-icon">üçé</span>
                        <span>Apple Calendar</span>
                        <span class="sync-status"></span>
                    </button>
                    <button class="sync-btn" id="syncNotion" data-platform="notion">
                        <span class="sync-icon">üìù</span>
                        <span>Notion</span>
                        <span class="sync-status"></span>
                    </button>
                </div>

                <div class="sidebar-section">
                    <h3>IA Status</h3>
                    <div class="ai-status-compact">
                        <span class="status-dot"></span>
                        <span class="status-text">Simul√©e</span>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="content-main">
                <!-- AI Input (only on planning view) -->
                <div class="ai-input-container" id="aiInputContainer">
                    <div class="input-box">
                        <textarea 
                            id="aiInput" 
                            placeholder="Dis-moi ce que tu veux planifier...
Ex: 'R√©viser maths 2h par jour cette semaine', 'Voir mes amis samedi soir', 'Sport 3 fois cette semaine'"
                            rows="3"
                        ></textarea>
                        <div class="input-actions">
                            <div class="quick-tags" id="quickTags">
                                <button class="tag-btn" data-tag="üò¥ Fatigu√©">üò¥</button>
                                <button class="tag-btn" data-tag="üìö Examen">üìö</button>
                                <button class="tag-btn" data-tag="üë• Amis">üë•</button>
                                <button class="tag-btn" data-tag="üèÉ Sport">üèÉ</button>
                                <button class="tag-btn" data-tag="‚öñÔ∏è √âquilibre">‚öñÔ∏è</button>
                            </div>
                            <button class="btn-generate" id="generateBtn">
                                <span id="generateText">G√©n√©rer mon planning</span>
                                <span class="btn-icon">‚ú®</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Views Container -->
                <div class="views-container">
                    <!-- Planning View -->
                    <div class="view active" id="planningView">
                        <div class="view-header">
                            <h2>Mon Planning</h2>
                            <div class="view-controls">
                                <button class="control-btn" id="prevWeek">‚Üê</button>
                                <span class="period-label" id="periodLabel">Cette semaine</span>
                                <button class="control-btn" id="nextWeek">‚Üí</button>
                            </div>
                        </div>

                        <div class="priority-legend">
                            <span class="legend-label">Priorit√©s :</span>
                            <span class="priority-tag critical">üî¥ Critique</span>
                            <span class="priority-tag high">üü† Haute</span>
                            <span class="priority-tag medium">üü° Moyenne</span>
                            <span class="priority-tag low">üü¢ Basse</span>
                        </div>

                        <div class="planning-grid" id="planningGrid">
                            <div class="empty-state">
                                <div class="empty-icon">üìÖ</div>
                                <h3>Ton planning est vide</h3>
                                <p>Utilise l'assistant IA ci-dessus pour commencer √† planifier tes journ√©es</p>
                            </div>
                        </div>

                        <div class="events-sections">
                            <div class="events-section">
                                <h3>üìç Aujourd'hui</h3>
                                <div class="events-list" id="todayEvents">
                                    <p class="empty-text">Aucun √©v√©nement aujourd'hui</p>
                                </div>
                            </div>

                            <div class="events-section">
                                <h3>üìÖ √Ä venir</h3>
                                <div class="events-list" id="upcomingEvents">
                                    <p class="empty-text">Aucun √©v√©nement √† venir</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar View -->
                    <div class="view" id="calendarView">
                        <div class="view-header">
                            <h2>Calendrier</h2>
                            <div class="view-controls">
                                <button class="control-btn" id="calPrevWeek">‚Üê</button>
                                <span class="period-label" id="calPeriodLabel">Cette semaine</span>
                                <button class="control-btn" id="calNextWeek">‚Üí</button>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendarGrid"></div>
                    </div>

                    <!-- Insights View -->
                    <div class="view" id="insightsView">
                        <div class="view-header">
                            <h2>Insights IA ü§ñ</h2>
                        </div>
                        <div class="insights-grid" id="insightsGrid"></div>
                    </div>

                    <!-- Templates View -->
                    <div class="view" id="templatesView">
                        <div class="view-header">
                            <h2>Templates</h2>
                        </div>
                        <div class="templates-grid" id="templatesGrid"></div>
                    </div>

                    <!-- Badges View -->
                    <div class="view" id="badgesView">
                        <div class="view-header">
                            <h2>Tes Badges üèÜ</h2>
                        </div>
                        <div class="streak-display">
                            <div class="streak-flame">üî•</div>
                            <div class="streak-info">
                                <h3><span id="streakDays">0</span> jours de suite</h3>
                                <p id="streakMessage">Utilise l'app chaque jour pour augmenter ton streak !</p>
                            </div>
                        </div>
                        <div class="badges-grid" id="badgesGrid"></div>
                    </div>

                    <!-- Profile View (NO AI INPUT) -->
                    <div class="view" id="profileView">
                        <div class="view-header">
                            <h2>Mon Profil</h2>
                        </div>
                        <div class="profile-content">
                            <div class="profile-card">
                                <div class="profile-avatar-large">
                                    <img src="" alt="" id="profileAvatar" style="display: none;">
                                    <span id="profileAvatarFallback">üë§</span>
                                </div>
                                <h3 id="profileName">Utilisateur</h3>
                                <p id="profileEmail"></p>
                            </div>

                            <div class="profile-stats">
                                <div class="stat-box">
                                    <span class="stat-value" id="totalEvents">0</span>
                                    <span class="stat-label">√âv√©nements</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-value" id="profileStreak">0</span>
                                    <span class="stat-label">Jours de suite</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-value" id="totalHours">0</span>
                                    <span class="stat-label">Heures planifi√©es</span>
                                </div>
                            </div>

                            <div class="profile-settings">
                                <h3>Param√®tres</h3>
                                <div class="form-group">
                                    <label>Nom</label>
                                    <input type="text" id="profileNameInput">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="profileEmailInput">
                                </div>
                                <div class="form-group">
                                    <label>Photo de profil</label>
                                    <input type="file" id="profileAvatarInput" accept="image/*">
                                </div>
                                <button class="btn-primary" id="saveProfile">Sauvegarder</button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Template Configuration Modal -->
    <div class="modal" id="templateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configuration du template</h2>
                <button class="modal-close" id="closeTemplateModal">‚úï</button>
            </div>
            <div class="modal-body" id="templateModalBody">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <!-- Workload Alert Modal -->
    <div class="modal alert-modal" id="workloadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="workloadTitle">‚ö†Ô∏è Attention</h2>
            </div>
            <div class="modal-body">
                <p id="workloadMessage"></p>
                <div class="modal-actions">
                    <button class="btn-secondary" id="workloadKeep">Garder ce planning</button>
                    <button class="btn-primary" id="workloadAdjust">Ajuster automatiquement</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sync Progress Modal -->
    <div class="modal" id="syncModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Synchronisation</h2>
            </div>
            <div class="modal-body">
                <div class="sync-progress">
                    <div class="sync-spinner"></div>
                    <p id="syncMessage">Synchronisation en cours...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span class="toast-icon">‚ú®</span>
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>L'IA analyse ta demande...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

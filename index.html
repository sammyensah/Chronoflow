<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronoFlow - Ton Assistant Planning IA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">‚ö°</div>
                <h1>ChronoFlow</h1>
            </div>
            <div class="header-stats">
                <button class="theme-toggle" id="themeToggle" title="Changer le th√®me">
                    <span class="theme-icon">üåô</span>
                </button>
                <div class="stat-badge">
                    <span class="stat-icon">üî•</span>
                    <span class="stat-value" id="streak">0</span>
                    <span class="stat-label">jours</span>
                </div>
                <button class="user-profile" id="profileBtn">
                    <div class="profile-icon">üë§</div>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <button class="nav-item active" data-view="planning">
                        <span class="nav-icon">üìã</span>
                        <span>Planning</span>
                    </button>
                    <button class="nav-item" data-view="calendar">
                        <span class="nav-icon">üìÖ</span>
                        <span>Calendrier</span>
                    </button>
                    <button class="nav-item" data-view="insights">
                        <span class="nav-icon">üìä</span>
                        <span>Insights IA</span>
                    </button>
                    <button class="nav-item" data-view="templates">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Templates</span>
                    </button>
                    <button class="nav-item" data-view="badges">
                        <span class="nav-icon">üèÜ</span>
                        <span>Badges</span>
                    </button>
                </nav>

                <div class="sync-section">
                    <h3>Synchronisation</h3>
                    <button class="sync-btn google" id="syncGoogle">
                        <span class="sync-icon">üìó</span>
                        <span>Google Calendar</span>
                        <span class="sync-status" id="googleStatus"></span>
                    </button>
                    <button class="sync-btn apple" id="syncApple">
                        <span class="sync-icon">üçé</span>
                        <span>Apple Calendar</span>
                        <span class="sync-status" id="appleStatus"></span>
                    </button>
                    <button class="sync-btn notion" id="syncNotion">
                        <span class="sync-icon">üìù</span>
                        <span>Notion Calendar</span>
                        <span class="sync-status" id="notionStatus"></span>
                    </button>
                </div>

                <div class="template-quick">
                    <h3>Template actif</h3>
                    <select id="templateSelect" class="template-selector">
                        <option value="none">Aucun</option>
                        <option value="student">üéì √âtudiant en examen</option>
                        <option value="freelance">üíº Freelance √©quilibr√©</option>
                        <option value="parent">üë®‚Äçüë©‚Äçüëß Parent actif</option>
                    </select>
                </div>

                <div class="ai-status">
                    <h3>IA Status</h3>
                    <div class="status-indicator">
                        <span class="status-dot" id="aiStatusDot"></span>
                        <span id="aiStatusText">Simul√©e (gratuite)</span>
                    </div>
                    <button class="config-btn" id="configAI">‚öôÔ∏è Configuration</button>
                </div>
            </aside>

            <!-- Content Area -->
            <div class="content-area">
                <!-- AI Input Section -->
                <div class="ai-input-section">
                    <div class="input-wrapper">
                        <textarea 
                            id="aiInput" 
                            placeholder="Parle-moi naturellement... 
Ex: 'J'ai un examen important le 15 mars, je dois r√©viser 2h par jour'
'Je suis fatigu√© cette semaine, mets du temps libre'
'Voir mes amis samedi soir'"
                            rows="3"
                        ></textarea>
                        <button class="send-btn" id="sendBtn">
                            <span id="sendBtnText">G√©n√©rer mon planning</span>
                            <span class="send-icon">‚ú®</span>
                        </button>
                    </div>
                    <div class="quick-actions">
                        <button class="quick-btn" data-text="Je suis fatigu√© cette semaine, plus de temps libre">üò¥ Fatigu√©</button>
                        <button class="quick-btn" data-text="J'ai un examen important dans 2 semaines">üìö Examen</button>
                        <button class="quick-btn" data-text="Je veux voir mes amis ce weekend">üë• Voir amis</button>
                        <button class="quick-btn" data-text="Sport 3 fois cette semaine">üèÉ Sport</button>
                        <button class="quick-btn" data-text="Je travaille trop, besoin d'√©quilibre">‚öñÔ∏è √âquilibre</button>
                    </div>
                    <div class="ai-suggestions" id="aiSuggestions">
                        <!-- AI suggestions will appear here -->
                    </div>
                </div>

                <!-- View Container -->
                <div id="viewContainer">
                    <!-- Planning View (New - Default) -->
                    <div id="planningView" class="view active">
                        <div class="view-header">
                            <h2>Mon Planning Intelligent</h2>
                            <div class="planning-controls">
                                <button class="control-btn" id="prevWeekPlanning">‚Üê</button>
                                <span class="current-period" id="currentPeriod">Cette semaine</span>
                                <button class="control-btn" id="nextWeekPlanning">‚Üí</button>
                                <select id="viewMode" class="view-mode-select">
                                    <option value="week">Semaine</option>
                                    <option value="day">Jour</option>
                                </select>
                            </div>
                        </div>

                        <div class="priority-legend">
                            <span class="legend-title">Priorit√©s :</span>
                            <span class="priority-badge critical">üî¥ Critique</span>
                            <span class="priority-badge high">üü† Haute</span>
                            <span class="priority-badge medium">üü° Moyenne</span>
                            <span class="priority-badge low">üü¢ Basse</span>
                        </div>
                        
                        <div class="planning-container" id="planningContainer">
                            <!-- Generated dynamically -->
                        </div>

                        <div class="events-list">
                            <h3>Tous mes √©v√©nements</h3>
                            <div class="events-filters">
                                <button class="filter-btn active" data-filter="all">Tous</button>
                                <button class="filter-btn" data-filter="study">√âtudes</button>
                                <button class="filter-btn" data-filter="work">Travail</button>
                                <button class="filter-btn" data-filter="social">Social</button>
                                <button class="filter-btn" data-filter="personal">Personnel</button>
                            </div>
                            <div id="eventsList" class="events-container">
                                <!-- Generated dynamically -->
                            </div>
                        </div>
                    </div>

                    <!-- Calendar View -->
                    <div id="calendarView" class="view">
                        <div class="view-header">
                            <h2>Calendrier</h2>
                            <div class="calendar-controls">
                                <button class="control-btn" id="prevWeek">‚Üê</button>
                                <span class="current-week" id="currentWeek">Cette semaine</span>
                                <button class="control-btn" id="nextWeek">‚Üí</button>
                            </div>
                        </div>
                        
                        <div class="calendar-grid" id="calendarGrid">
                            <!-- Generated dynamically -->
                        </div>
                    </div>

                    <!-- Insights View -->
                    <div id="insightsView" class="view">
                        <div class="view-header">
                            <h2>Tes Insights IA ü§ñ</h2>
                        </div>
                        
                        <div class="insights-grid">
                            <div class="insight-card productivity">
                                <div class="insight-icon">‚òÄÔ∏è</div>
                                <h3>Productivit√© optimale</h3>
                                <p class="insight-main" id="bestTime">Analyse en cours...</p>
                                <p class="insight-detail" id="productivityDetail">Bas√© sur tes activit√©s</p>
                            </div>

                            <div class="insight-card balance">
                                <div class="insight-icon">‚öñÔ∏è</div>
                                <h3>√âquilibre vie/travail</h3>
                                <div class="balance-score">
                                    <div class="score-circle" id="scoreCircle">
                                        <span class="score-value" id="balanceScore">--</span>
                                        <span class="score-percent">%</span>
                                    </div>
                                </div>
                                <p class="insight-detail" id="balanceDetail">Calcul√© sur 7 jours</p>
                            </div>

                            <div class="insight-card warning">
                                <div class="insight-icon">‚ö†Ô∏è</div>
                                <h3>Alertes & Pr√©dictions</h3>
                                <p class="insight-main" id="prediction">Analyse en cours...</p>
                                <p class="insight-detail" id="predictionDetail">Bas√© sur ton agenda</p>
                            </div>

                            <div class="insight-card social">
                                <div class="insight-icon">ü§ù</div>
                                <h3>Vie sociale</h3>
                                <p class="insight-main" id="socialInsight">Analyse en cours...</p>
                                <button class="insight-action" id="planSocial">Planifier une sortie</button>
                            </div>

                            <div class="insight-card energy">
                                <div class="insight-icon">‚ö°</div>
                                <h3>Niveau d'√©nergie</h3>
                                <p class="insight-main" id="energyInsight">Optimal</p>
                                <p class="insight-detail" id="energyDetail">Tu g√®res bien ta charge</p>
                            </div>

                            <div class="insight-card recommendations">
                                <div class="insight-icon">üí°</div>
                                <h3>Recommandations IA</h3>
                                <div id="aiRecommendations" class="recommendations-list">
                                    <!-- Generated dynamically -->
                                </div>
                            </div>
                        </div>

                        <div class="stats-chart">
                            <h3>R√©partition du temps (7 derniers jours)</h3>
                            <div class="chart-bars" id="timeChart">
                                <!-- Generated dynamically -->
                            </div>
                        </div>
                    </div>

                    <!-- Templates View -->
                    <div id="templatesView" class="view">
                        <div class="view-header">
                            <h2>Templates de Vie</h2>
                        </div>

                        <div class="templates-grid" id="templatesGrid">
                            <!-- Generated dynamically -->
                        </div>
                    </div>

                    <!-- Badges View -->
                    <div id="badgesView" class="view">
                        <div class="view-header">
                            <h2>Tes Accomplissements üèÜ</h2>
                        </div>

                        <div class="streak-display">
                            <div class="streak-flame">üî•</div>
                            <div class="streak-info">
                                <h3><span id="streakDays">0</span> jours de suite</h3>
                                <p id="streakMessage">Continue comme √ßa !</p>
                                <div class="streak-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="streakProgress"></div>
                                    </div>
                                    <span class="progress-text" id="streakGoal">Prochain: Semaine Parfaite (7 jours)</span>
                                </div>
                            </div>
                        </div>

                        <div class="badges-grid" id="badgesGrid">
                            <!-- Generated dynamically -->
                        </div>

                        <div class="calendar-heatmap">
                            <h3>Ton activit√© des 60 derniers jours</h3>
                            <div class="heatmap-grid" id="heatmapGrid">
                                <!-- Generated dynamically -->
                            </div>
                            <div class="heatmap-legend">
                                <span>Moins actif</span>
                                <div class="legend-boxes">
                                    <div class="legend-box level-0"></div>
                                    <div class="legend-box level-1"></div>
                                    <div class="legend-box level-2"></div>
                                    <div class="legend-box level-3"></div>
                                    <div class="legend-box level-4"></div>
                                </div>
                                <span>Tr√®s actif</span>
                            </div>
                        </div>
                    </div>

                    <!-- Profile View -->
                    <div id="profileView" class="view">
                        <div class="view-header">
                            <h2>Mon Profil</h2>
                        </div>

                        <div class="profile-container">
                            <div class="profile-card">
                                <div class="profile-avatar">
                                    <div class="avatar-icon">üë§</div>
                                </div>
                                <div class="profile-info">
                                    <h3 id="userName">Utilisateur</h3>
                                    <p class="profile-email" id="userEmail">Nouvel utilisateur</p>
                                    <span class="profile-badge">Membre depuis <span id="memberSince">aujourd'hui</span></span>
                                </div>
                            </div>

                            <div class="profile-stats-grid">
                                <div class="stat-card">
                                    <div class="stat-icon">üìÖ</div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="totalEvents">0</span>
                                        <span class="stat-label">√âv√©nements cr√©√©s</span>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üî•</div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="bestStreak">0</span>
                                        <span class="stat-label">Meilleur streak</span>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">‚è±Ô∏è</div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="totalHours">0</span>
                                        <span class="stat-label">Heures planifi√©es</span>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">üèÜ</div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="badgesEarned">0</span>
                                        <span class="stat-label">Badges d√©bloqu√©s</span>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-settings">
                                <h3>Param√®tres</h3>
                                <div class="settings-group">
                                    <label>Nom d'utilisateur</label>
                                    <input type="text" id="userNameInput" placeholder="Ton nom">
                                </div>
                                <div class="settings-group">
                                    <label>Heures de travail pr√©f√©r√©es</label>
                                    <select id="preferredWorkTime">
                                        <option value="morning">Matin (6h-12h)</option>
                                        <option value="afternoon">Apr√®s-midi (12h-18h)</option>
                                        <option value="evening">Soir (18h-22h)</option>
                                    </select>
                                </div>
                                <div class="settings-group">
                                    <label>Cl√© API Claude (optionnel)</label>
                                    <input type="password" id="apiKeyInput" placeholder="sk-ant-...">
                                    <small>Pour activer l'IA Claude r√©elle. <a href="https://console.anthropic.com" target="_blank">Obtenir une cl√©</a></small>
                                </div>
                                <button class="save-settings-btn" id="saveSettings">üíæ Sauvegarder</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Config Modal -->
        <div class="modal" id="aiConfigModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Configuration IA</h2>
                    <button class="modal-close" id="closeAIConfig">‚úï</button>
                </div>
                <div class="modal-body">
                    <p>ChronoFlow peut fonctionner avec :</p>
                    <div class="ai-options">
                        <div class="ai-option">
                            <input type="radio" name="aiMode" value="simulated" id="aiSimulated" checked>
                            <label for="aiSimulated">
                                <strong>IA Simul√©e (Gratuit)</strong>
                                <span>Analyse intelligente bas√©e sur des r√®gles</span>
                            </label>
                        </div>
                        <div class="ai-option">
                            <input type="radio" name="aiMode" value="claude" id="aiClaude">
                            <label for="aiClaude">
                                <strong>Claude IA R√©elle (Payant)</strong>
                                <span>Compr√©hension naturelle avanc√©e - N√©cessite cl√© API</span>
                            </label>
                        </div>
                    </div>
                    <div class="api-key-section" id="apiKeySection" style="display: none;">
                        <label>Cl√© API Claude:</label>
                        <input type="password" id="apiKeyConfig" placeholder="sk-ant-api03-...">
                        <small>Obtiens ta cl√© sur <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a></small>
                    </div>
                    <button class="modal-save-btn" id="saveAIConfig">Sauvegarder</button>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast">
            <div class="toast-icon">‚ú®</div>
            <div class="toast-content">
                <p class="toast-message" id="toastMessage"></p>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p>L'IA analyse ta demande...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

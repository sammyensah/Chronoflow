<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChronoFlow V4</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Crimson+Pro:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- LANGUAGE SELECTOR -->
<div id="langScreen" class="auth-screen" style="display:none">
    <div class="auth-bg"><div class="auth-particles" id="particlesLang"></div></div>
    <div class="auth-container">
        <div class="ob-welcome">
            <div class="ob-icon animate-pop">âš¡</div>
            <h1 class="ob-title animate-down">ChronoFlow</h1>
            <p class="ob-sub animate-down delay-1">Choisis ta langue / Choose your language</p>
        </div>
        <div class="lang-grid animate-up delay-2">
            <div class="lang-card" onclick="selectLang('fr')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="20" height="40" fill="#002395"/><rect x="20" width="20" height="40" fill="#fff"/><rect x="40" width="20" height="40" fill="#ED2939"/></svg></div>
                <div class="lang-name">FranÃ§ais</div>
            </div>
            <div class="lang-card" onclick="selectLang('en')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="60" height="40" fill="#012169"/><path d="M0,0 L60,40 M60,0 L0,40" stroke="#fff" stroke-width="7"/><path d="M0,0 L60,40 M60,0 L0,40" stroke="#C8102E" stroke-width="4"/><path d="M30,0 V40 M0,20 H60" stroke="#fff" stroke-width="11"/><path d="M30,0 V40 M0,20 H60" stroke="#C8102E" stroke-width="6"/></svg></div>
                <div class="lang-name">English</div>
            </div>
            <div class="lang-card" onclick="selectLang('de')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="60" height="13.3" fill="#000"/><rect y="13.3" width="60" height="13.3" fill="#DD0000"/><rect y="26.6" width="60" height="13.4" fill="#FFCE00"/></svg></div>
                <div class="lang-name">Deutsch</div>
            </div>
            <div class="lang-card" onclick="selectLang('es')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="60" height="8" fill="#c60b1e"/><rect y="8" width="60" height="24" fill="#ffc400"/><rect y="32" width="60" height="8" fill="#c60b1e"/></svg></div>
                <div class="lang-name">EspaÃ±ol</div>
            </div>
            <div class="lang-card" onclick="selectLang('it')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="20" height="40" fill="#009246"/><rect x="20" width="20" height="40" fill="#fff"/><rect x="40" width="20" height="40" fill="#CE2B37"/></svg></div>
                <div class="lang-name">Italiano</div>
            </div>
            <div class="lang-card" onclick="selectLang('ar')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="60" height="40" fill="#006C35"/><rect width="20" height="40" fill="#fff"/><circle cx="32" cy="20" r="7" fill="#006C35" stroke="#fff" stroke-width="2"/></svg></div>
                <div class="lang-name">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
            </div>
            <div class="lang-card lang-card-center" onclick="selectLang('pt')">
                <div class="lang-flag"><svg viewBox="0 0 60 40"><rect width="60" height="40" fill="#E21C1C"/><rect width="24" height="40" fill="#006600"/><circle cx="24" cy="20" r="8" fill="#FFFF00" stroke="#006600" stroke-width="1.5"/></svg></div>
                <div class="lang-name">PortuguÃªs</div>
            </div>
        </div>
    </div>
</div>

<!-- AUTH SCREEN -->
<div id="authScreen" class="auth-screen" style="display:none">
    <div class="auth-bg"><div class="auth-particles" id="particles"></div></div>
    <div class="auth-container">
        <div class="auth-logo animate-down">
            <span class="auth-logo-icon">âš¡</span>
            <h1 class="auth-logo-text">ChronoFlow</h1>
        </div>
        <p class="auth-tagline animate-down delay-1">Ton assistant planning intelligent</p>
        <div class="auth-tabs animate-down delay-2" id="authTabsBar">
            <div class="auth-tab-slider" id="authTabSlider"></div>
            <button class="auth-tab active" id="tabLogin" onclick="switchAuthTab('login')">Se connecter</button>
            <button class="auth-tab" id="tabRegister" onclick="switchAuthTab('register')">S'inscrire</button>
        </div>
        <div class="auth-forms-outer" id="authFormsOuter">
            <!-- Login -->
            <div class="auth-form auth-form-panel active" id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="toi@exemple.com" class="auth-live-input">
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="auth-live-input">
                </div>
                <button class="btn-auth" onclick="handleLogin()">Se connecter â†’</button>
            </div>
            <!-- Register -->
            <div class="auth-form auth-form-panel" id="registerForm">
                <div class="form-group">
                    <label>PrÃ©nom *</label>
                    <input type="text" id="regName" placeholder="Marie" class="auth-live-input">
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="regEmail" placeholder="toi@exemple.com" class="auth-live-input">
                </div>
                <div class="form-group">
                    <label>Mot de passe *</label>
                    <input type="password" id="regPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="auth-live-input">
                </div>
                <button class="btn-auth" onclick="handleRegister()">CrÃ©er mon compte â†’</button>
            </div>
        </div>
    </div>
</div>

<!-- ONBOARDING -->
<div id="onboardingScreen" class="auth-screen" style="display:none">
    <div class="auth-bg"><div class="auth-particles" id="particles2"></div></div>
    <div class="auth-container wide">
        <div class="ob-step active" id="obStep1">
            <div class="ob-welcome">
                <div class="ob-icon animate-pop">âš¡</div>
                <h1 class="ob-title animate-down delay-1">Bienvenue sur<br><span>ChronoFlow</span></h1>
                <p class="ob-sub animate-down delay-2">Choisis ton profil pour commencer</p>
            </div>
            <div class="profile-cards animate-up delay-3">
                <div class="profile-card-big" onclick="selectProfile('student')">
                    <div class="profile-card-icon">ğŸ“</div>
                    <h3>Ã‰tudiant</h3>
                    <p>Cours, rÃ©visions, examens</p>
                    <button class="btn-choose">Choisir</button>
                </div>
                <div class="profile-card-big" onclick="selectProfile('worker')">
                    <div class="profile-card-icon">ğŸ’¼</div>
                    <h3>Travailleur</h3>
                    <p>Projets, rÃ©unions, deadlines</p>
                    <button class="btn-choose">Choisir</button>
                </div>
                <div class="profile-card-big" onclick="selectProfile('custom')">
                    <div class="profile-card-icon">âœ¨</div>
                    <h3>PersonnalisÃ©</h3>
                    <p>Je configure moi-mÃªme</p>
                    <button class="btn-choose">Choisir</button>
                </div>
            </div>
        </div>
        <div class="ob-step" id="obStep2">
            <h1 class="ob-title animate-down">ğŸ“ Configuration Ã‰tudiant</h1>
            <div class="ob-form animate-up delay-2">
                <div id="coursesContainer">
                    <div class="course-row">
                        <select class="sel"><option value="1">Lundi</option><option value="2">Mardi</option><option value="3">Mercredi</option><option value="4">Jeudi</option><option value="5">Vendredi</option><option value="6">Samedi</option></select>
                        <input type="time" class="tinp" value="08:00">
                        <input type="time" class="tinp" value="10:00">
                        <input type="text" class="sinp" placeholder="MatiÃ¨re">
                        <button class="btn-remove" onclick="removeCourse(this)">âœ•</button>
                    </div>
                </div>
                <button class="btn-secondary" onclick="addCourse()" style="margin:0.75rem 0">+ Ajouter un cours</button>
                <div class="ob-btns">
                    <button class="btn-secondary" onclick="goObStep(1)">â† Retour</button>
                    <button class="btn-primary" onclick="finishOnboarding()">Terminer ğŸš€</button>
                </div>
            </div>
        </div>
        <div class="ob-step" id="obStep2w">
            <h1 class="ob-title animate-down">ğŸ’¼ Configuration Travailleur</h1>
            <div class="ob-form animate-up delay-2">
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
                    <div class="form-group"><label>DÃ©but de journÃ©e</label><input type="time" id="workStart" value="09:00"></div>
                    <div class="form-group"><label>Fin de journÃ©e</label><input type="time" id="workEnd" value="18:00"></div>
                </div>
                <div class="ob-btns">
                    <button class="btn-secondary" onclick="goObStep(1)">â† Retour</button>
                    <button class="btn-primary" onclick="finishOnboarding()">Terminer ğŸš€</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- APP -->
<div id="appScreen" class="app-screen" style="display:none">

    <header class="header">
        <div class="header-left">
            <button class="btn-sidebar" id="sidebarHover">
                <span class="ham-line"></span><span class="ham-line"></span><span class="ham-line"></span>
            </button>
        </div>
        <div class="header-center">
            <div class="logo-link" onclick="reloadApp()">
                <span class="logo-icon">âš¡</span>
                <span class="logo-text">ChronoFlow</span>
            </div>
        </div>
        <div class="header-right">
            <div class="streak-badge" onclick="switchView('badges')" title="Badges">
                <span>ğŸ”¥</span><span id="headerStreak">0</span>
            </div>
            <!-- Theme toggle soleil/lune -->
            <div class="header-theme-toggle" id="headerThemeToggle">
                <div class="htt-slider" id="httSlider"></div>
                <button class="htt-btn" id="httLight" onclick="setTheme('light')" title="Mode clair">â˜€ï¸</button>
                <button class="htt-btn" id="httDark" onclick="setTheme('dark')" title="Mode sombre">ğŸŒ™</button>
            </div>
            <button class="avatar-btn" id="headerAvatarBtn" onclick="switchView('profile')">
                <span id="headerAvatarEmoji">ğŸ‘¤</span>
                <img id="headerAvatarImg" src="" alt="" style="display:none">
            </button>
        </div>
    </header>

    <div class="app-body">
        <aside class="sidebar-mini" id="sidebar">
            <nav class="nav-mini">
                <button class="nav-mini-btn active" data-view="planning" onclick="switchView('planning')"><span class="nav-mini-icon">ğŸ“‹</span><span class="nav-mini-label">Planning</span></button>
                <button class="nav-mini-btn" data-view="calendar" onclick="switchView('calendar')"><span class="nav-mini-icon">ğŸ“…</span><span class="nav-mini-label">Calendrier</span></button>
                <button class="nav-mini-btn" data-view="insights" onclick="switchView('insights')"><span class="nav-mini-icon">ğŸ“Š</span><span class="nav-mini-label">Insights</span></button>
                <button class="nav-mini-btn" data-view="templates" onclick="switchView('templates')"><span class="nav-mini-icon">ğŸ“</span><span class="nav-mini-label">Templates</span></button>
                <button class="nav-mini-btn" data-view="badges" onclick="switchView('badges')"><span class="nav-mini-icon">ğŸ†</span><span class="nav-mini-label">Badges</span></button>
                <button class="nav-mini-btn" data-view="settings" onclick="switchView('settings')"><span class="nav-mini-icon">âš™ï¸</span><span class="nav-mini-label">ParamÃ¨tres</span></button>
            </nav>
        </aside>

        <main class="content" id="mainContent">

            <!-- CHRONOS MASCOT (style Koro-sensei) -->
            <div class="mascot" id="mascot" onclick="openChronosChat()">
                <div class="mascot-body" id="mascotBody">
                    <div class="mascot-koro" id="mascotKoro">
                        <!-- TÃªte ronde lumineuse style Koro-sensei -->
                        <div class="koro-head" id="koroHead">
                            <div class="koro-face">
                                <div class="koro-eyes">
                                    <div class="koro-eye"><div class="koro-pupil"></div></div>
                                    <div class="koro-eye"><div class="koro-pupil"></div></div>
                                </div>
                                <div class="koro-smile"></div>
                            </div>
                            <div class="koro-glow" id="koroGlow"></div>
                        </div>
                        <!-- Corps avec costume -->
                        <div class="koro-body-wrap">
                            <div class="koro-collar"></div>
                            <div class="koro-suit" id="koroSuit">
                                <div class="koro-tie" id="koroTie"></div>
                                <div class="koro-btn1"></div>
                                <div class="koro-btn2"></div>
                            </div>
                            <div class="koro-arms">
                                <div class="koro-arm left"><div class="koro-hand"></div></div>
                                <div class="koro-arm right"><div class="koro-hand"></div></div>
                            </div>
                        </div>
                        <!-- Accessoire Ã©quipÃ© -->
                        <div class="koro-accessory" id="koroAccessory"></div>
                        <!-- Jambes -->
                        <div class="koro-legs">
                            <div class="koro-leg"><div class="koro-shoe"></div></div>
                            <div class="koro-leg"><div class="koro-shoe"></div></div>
                        </div>
                    </div>
                </div>
                <div class="mascot-name-tag">Chronos</div>
            </div>

            <!-- TUTORIAL OVERLAY + PANEL -->
            <div class="tut-overlay" id="tutOverlay" style="display:none"></div>
            <div class="tut-panel" id="tutPanel" style="display:none">
                <div class="tut-chrono-figure">
                    <div class="tut-koro-head"><div class="tut-koro-face"><div class="tut-koro-eyes"><div class="tut-koro-eye"></div><div class="tut-koro-eye"></div></div><div class="tut-koro-smile"></div></div></div>
                    <div class="tut-koro-body"></div>
                </div>
                <div class="tut-bubble">
                    <div class="tut-text" id="tutText"></div>
                    <button class="tut-next" id="tutNext" onclick="tutNext()" style="display:none">Suivant â†’</button>
                </div>
            </div>

            <!-- Spotlight for tutorial -->
            <div class="spotlight" id="spotlight" style="display:none"></div>

            <!-- AI Panel -->
            <div class="ai-panel" id="aiPanel">
                <div class="ai-inner">
                    <textarea id="aiInput" placeholder="Dis-moi ce que tu veux planifier...&#10;Ex: J'ai une Ã©val de maths dans 3 jours et j'ai rien rÃ©visÃ©"></textarea>
                    <div class="ai-actions">
                        <div class="quick-tags">
                            <button class="tag" data-txt="Je suis fatiguÃ© cette semaine" onclick="addTag(this)">ğŸ˜´ FatiguÃ©</button>
                            <button class="tag" data-txt="J'ai un examen important et j'ai rien rÃ©visÃ©" onclick="addTag(this)">ğŸ“š Examen</button>
                            <button class="tag" data-txt="Voir mes amis ce weekend" onclick="addTag(this)">ğŸ‘¥ Amis</button>
                            <button class="tag" data-txt="Sport 3 fois cette semaine" onclick="addTag(this)">ğŸƒ Sport</button>
                            <button class="tag" data-txt="Besoin d'Ã©quilibre vie perso et travail" onclick="addTag(this)">âš–ï¸ Ã‰quilibre</button>
                        </div>
                        <div class="ai-right-actions">
                            <button class="btn-voice" onclick="startVoice()" id="voiceBtn">ğŸ¤</button>
                            <button class="btn-generate" onclick="generate()"><span>GÃ©nÃ©rer</span><span>âœ¨</span></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PLANNING VIEW -->
            <div class="view active" id="viewPlanning">
                <div class="view-header">
                    <h2>Mon Planning <span class="template-badge" id="planningTemplateBadge"></span></h2>
                    <div class="week-nav">
                        <button class="nav-arrow" onclick="changeWeek(-1)">â†</button>
                        <span id="weekLabel">Cette semaine</span>
                        <button class="nav-arrow" onclick="changeWeek(1)">â†’</button>
                    </div>
                </div>
                <div class="priority-legend">
                    <span>PrioritÃ©s :</span>
                    <span class="pill critical">ğŸ”´ Critique</span>
                    <span class="pill high">ğŸŸ  Haute</span>
                    <span class="pill medium">ğŸŸ¡ Moyenne</span>
                    <span class="pill low">ğŸŸ¢ Basse</span>
                </div>
                <div id="planningGrid" class="planning-grid">
                    <div class="empty-state"><div class="empty-icon">ğŸ“…</div><h3>Planning vide</h3><p>Utilise l'IA pour planifier</p></div>
                </div>
                <div class="event-sections">
                    <div class="event-section"><h3>ğŸ“ Aujourd'hui</h3><div id="todayList"><p class="hint">Rien de prÃ©vu</p></div></div>
                    <div class="event-section"><h3>ğŸ“… Ã€ venir</h3><div id="upcomingList"><p class="hint">Rien de prÃ©vu</p></div></div>
                </div>
            </div>

            <!-- CALENDAR VIEW -->
            <div class="view" id="viewCalendar">
                <div class="view-header">
                    <h2>Calendrier</h2>
                    <div class="week-nav">
                        <button class="nav-arrow" onclick="changeMonth(-1)">â†</button>
                        <span id="monthLabel">FÃ©vrier 2026</span>
                        <button class="nav-arrow" onclick="changeMonth(1)">â†’</button>
                    </div>
                </div>
                <div class="month-cal-wrap"><div id="monthCal" class="month-cal"></div></div>
            </div>

            <!-- INSIGHTS VIEW -->
            <div class="view" id="viewInsights">
                <div class="view-header"><h2>Insights ğŸ“Š</h2></div>
                <div id="insightsGrid" class="insights-grid"></div>
            </div>

            <!-- TEMPLATES VIEW -->
            <div class="view" id="viewTemplates">
                <div class="view-header" style="justify-content:center"><h2>Templates</h2></div>
                <div id="templatesContent"></div>
            </div>

            <!-- BADGES VIEW -->
            <div class="view" id="viewBadges">
                <div class="view-header"><h2 class="badges-title">Badges ğŸ†</h2></div>
                <!-- XP Bar -->
                <div class="xp-section" id="xpSection">
                    <div class="xp-level-label" id="xpLevelLabel">Niveau 1</div>
                    <div class="xp-bar-row">
                        <div class="xp-bar-track"><div class="xp-bar-fill" id="xpBarFill"></div></div>
                        <span class="xp-bar-text" id="xpBarText">0 / 100 XP</span>
                    </div>
                    <div class="xp-rank-pill" id="xpRankPill" onclick="openRankModal()">ğŸ¥‰ Bronze â–¼</div>
                </div>
                <!-- Message Chronos contextuel badges -->
                <div class="chrono-badge-msg" id="chronoBadgeMsg">
                    <div class="cbm-koro"><div class="cbm-head"></div><div class="cbm-body"></div></div>
                    <div class="cbm-bubble" id="chronoBadgeBubble">...</div>
                </div>
                <div id="badgeGrid" class="badge-grid"></div>
            </div>

            <!-- PROFILE VIEW -->
            <div class="view" id="viewProfile">
                <div class="view-header"><h2>Profil</h2></div>
                <div class="profile-layout">
                    <div class="profile-left">
                        <div class="profile-avatar-wrap">
                            <div class="profile-avatar" id="profileAvatarEl">
                                <span id="profileAvatarEmoji">ğŸ‘¤</span>
                                <img id="profileAvatarImg" src="" alt="" style="display:none">
                                <div class="camera-overlay" onclick="document.getElementById('avatarFileInput').click()">ğŸ“·</div>
                            </div>
                            <input type="file" id="avatarFileInput" accept="image/*" style="display:none" onchange="handleAvatarChange(this)">
                        </div>
                        <h3 id="profileName">User</h3>
                        <p id="profileEmail" style="color:var(--text2);font-size:0.9rem"></p>
                        <div class="profile-rank-display" id="profileRankDisplay"></div>
                    </div>
                    <div class="profile-right">
                        <div class="stats-grid">
                            <div class="stat-card"><span class="stat-val" id="statEvents">0</span><span class="stat-lbl">Ã‰vÃ©nements</span></div>
                            <div class="stat-card"><span class="stat-val" id="statStreak">0</span><span class="stat-lbl">Jours streak</span></div>
                            <div class="stat-card"><span class="stat-val" id="statHours">0</span><span class="stat-lbl">Heures</span></div>
                            <div class="stat-card"><span class="stat-val" id="statBadges">0</span><span class="stat-lbl">Badges</span></div>
                        </div>
                        <div class="profile-settings">
                            <h3>Informations</h3>
                            <div class="form-group"><label>PrÃ©nom</label><input type="text" id="profileNameInput"></div>
                            <div class="form-group"><label>Email (non modifiable)</label><input type="email" id="profileEmailInput" disabled></div>
                            <button class="btn-primary" onclick="saveProfile()">Sauvegarder</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SETTINGS VIEW -->
            <div class="view" id="viewSettings">
                <div class="view-header"><h2>ParamÃ¨tres âš™ï¸</h2></div>
                <div class="settings-content">

                    <div class="setting-card">
                        <h3>ğŸŒ Langue</h3>
                        <div class="setting-center-zone">
                            <div class="lang-dd-wrap" id="langDDWrap">
                                <button class="lang-dd-btn" id="langDDBtn" onclick="toggleLangDD()">
                                    <span class="lang-dd-flag" id="langDDFlag"></span>
                                    <span class="lang-dd-name" id="langDDName">FranÃ§ais</span>
                                    <span class="lang-dd-arrow">â–¼</span>
                                </button>
                                <div class="lang-dd-menu" id="langDDMenu">
                                    <div class="lang-dd-item" onclick="setLang('fr')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="20" height="40" fill="#002395"/><rect x="20" width="20" height="40" fill="#fff"/><rect x="40" width="20" height="40" fill="#ED2939"/></svg> FranÃ§ais</div>
                                    <div class="lang-dd-item" onclick="setLang('en')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="60" height="40" fill="#012169"/><path d="M0,0 L60,40 M60,0 L0,40" stroke="#fff" stroke-width="7"/><path d="M0,0 L60,40 M60,0 L0,40" stroke="#C8102E" stroke-width="4"/><path d="M30,0 V40 M0,20 H60" stroke="#fff" stroke-width="11"/><path d="M30,0 V40 M0,20 H60" stroke="#C8102E" stroke-width="6"/></svg> English</div>
                                    <div class="lang-dd-item" onclick="setLang('de')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="60" height="13.3" fill="#000"/><rect y="13.3" width="60" height="13.3" fill="#DD0000"/><rect y="26.6" width="60" height="13.4" fill="#FFCE00"/></svg> Deutsch</div>
                                    <div class="lang-dd-item" onclick="setLang('es')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="60" height="8" fill="#c60b1e"/><rect y="8" width="60" height="24" fill="#ffc400"/><rect y="32" width="60" height="8" fill="#c60b1e"/></svg> EspaÃ±ol</div>
                                    <div class="lang-dd-item" onclick="setLang('it')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="20" height="40" fill="#009246"/><rect x="20" width="20" height="40" fill="#fff"/><rect x="40" width="20" height="40" fill="#CE2B37"/></svg> Italiano</div>
                                    <div class="lang-dd-item" onclick="setLang('ar')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="60" height="40" fill="#006C35"/><rect width="20" height="40" fill="#fff"/></svg> Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
                                    <div class="lang-dd-item" onclick="setLang('pt')"><svg class="flag-xs" viewBox="0 0 60 40"><rect width="60" height="40" fill="#E21C1C"/><rect width="24" height="40" fill="#006600"/></svg> PortuguÃªs</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h3>ğŸ”” Notifications</h3>
                        <div class="setting-center-zone">
                            <div class="yn-toggle" id="notifToggle">
                                <div class="yn-slider" id="notifSlider"></div>
                                <button class="yn-btn yn-left" id="notifYes" onclick="setNotif(true)">Oui</button>
                                <button class="yn-btn yn-right" id="notifNo" onclick="setNotif(false)">Non</button>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h3>ğŸ¨ ThÃ¨me</h3>
                        <div class="setting-center-zone">
                            <div class="yn-toggle theme-toggle" id="themeToggle">
                                <div class="yn-slider" id="themeSlider"></div>
                                <button class="yn-btn yn-left" id="themeLight" onclick="setTheme('light')">â˜€ï¸ Clair</button>
                                <button class="yn-btn yn-right" id="themeDark" onclick="setTheme('dark')">ğŸŒ™ Sombre</button>
                            </div>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h3>ğŸ”’ ConfidentialitÃ©</h3>
                        <div class="setting-center-zone">
                            <button class="btn-secondary" style="max-width:260px" onclick="requestPasswordChange()">Changer le mot de passe</button>
                            <p style="font-size:0.8rem;color:var(--text2);margin-top:0.5rem;text-align:center">Un code email de vÃ©rification sera envoyÃ©</p>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h3>ğŸ“Š DonnÃ©es</h3>
                        <div class="setting-center-zone" style="gap:0.75rem">
                            <button class="btn-secondary" style="max-width:260px" onclick="exportData()">Exporter mes donnÃ©es</button>
                            <button class="btn-secondary" style="max-width:260px;background:rgba(239,68,68,0.1);color:var(--critical);border-color:rgba(239,68,68,0.3)" onclick="deleteAccount()">Supprimer mon compte</button>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
</div>

<!-- WELCOME CHRONOS MODAL -->
<div class="modal" id="welcomeModal">
    <div class="modal-box welcome-chronos-box">
        <div class="wc-koro">
            <div class="wc-koro-head"><div class="wc-koro-face"><div class="wc-koro-eyes"><div class="wc-koro-eye"></div><div class="wc-koro-eye"></div></div><div class="wc-koro-smile"></div></div></div>
            <div class="wc-koro-body"></div>
        </div>
        <h3 style="font-size:1.4rem;margin:1rem 0 0.5rem">Bonjour ! Je suis <span style="color:var(--primary)">Chronos</span> !</h3>
        <p style="color:var(--text2);margin-bottom:0.75rem">Ton assistant IA pour organiser ta vie et atteindre tes objectifs. Je suis lÃ  pour te guider, te motiver et planifier avec toi !</p>
        <p style="font-weight:600;margin-bottom:1.5rem">Veux-tu que je te fasse un tutoriel de l'application ?</p>
        <div class="modal-btns">
            <button class="btn-secondary" onclick="skipTutorial()">Non merci</button>
            <button class="btn-primary" onclick="startTutorial()">Oui, allons-y ! âœ¨</button>
        </div>
    </div>
</div>

<!-- CHRONOS CHAT MODAL -->
<div class="modal" id="chronosChatModal" onclick="if(event.target===this)closeChronosChat()">
    <div class="modal-box chronos-chat-box">
        <div class="chat-header">
            <div class="chat-chrono-mini">
                <div class="ccm-koro-head" id="ccmKoroHead"></div>
            </div>
            <div class="chat-header-info">
                <strong>Chronos</strong>
                <span>Assistant IA</span>
            </div>
            <!-- Slider Parler / Casier -->
            <div class="chat-mode-toggle" id="chatModeToggle">
                <div class="cmt-slider" id="cmtSlider"></div>
                <button class="cmt-btn active" id="cmtTalk" onclick="setChatMode('talk')">ğŸ’¬ Parler</button>
                <button class="cmt-btn" id="cmtLocker" onclick="setChatMode('locker')">ğŸ’ Casier</button>
            </div>
            <button class="chat-close-btn" onclick="closeChronosChat()">âœ•</button>
        </div>
        <!-- Vue Parler -->
        <div id="chatTalkView">
            <div class="chat-messages" id="chatMessages">
                <div class="chat-msg chrono-msg"><div class="chat-bubble">Salut ! Comment puis-je t'aider Ã  mieux t'organiser aujourd'hui ? ğŸ˜Š</div></div>
            </div>
            <div class="chat-input-row">
                <input type="text" id="chatInput" placeholder="Pose ta question Ã  Chronos..." onkeydown="if(event.key==='Enter')sendMsg()">
                <button class="chat-send-btn" onclick="sendMsg()">â¤</button>
            </div>
        </div>
        <!-- Vue Casier -->
        <div id="chatLockerView" style="display:none">
            <div class="locker-grid" id="lockerGrid"></div>
        </div>
    </div>
</div>

<!-- DAY DETAIL MODAL -->
<div class="modal-full" id="dayDetailModal" onclick="if(event.target===this)closeDayDetail()">
    <div class="modal-full-content">
        <button class="modal-close-btn" onclick="closeDayDetail()">âœ•</button>
        <div id="dayDetailContent"></div>
    </div>
</div>

<!-- INSIGHT DETAIL MODAL -->
<div class="modal-full" id="insightDetailModal" onclick="if(event.target===this)closeInsightDetail()">
    <div class="modal-full-content">
        <button class="modal-close-btn" onclick="closeInsightDetail()">âœ•</button>
        <div id="insightDetailContent"></div>
    </div>
</div>

<!-- EVENT DETAIL MODAL -->
<div class="modal" id="eventDetailModal">
    <div class="modal-box">
        <h3 id="eventDetailTitle">DÃ©tails</h3>
        <div id="eventDetailBody"></div>
        <div class="priority-selector">
            <label>Changer la prioritÃ© :</label>
            <button class="priority-btn critical" onclick="changePriority('critical')">ğŸ”´ Critique</button>
            <button class="priority-btn high" onclick="changePriority('high')">ğŸŸ  Haute</button>
            <button class="priority-btn medium" onclick="changePriority('medium')">ğŸŸ¡ Moyenne</button>
            <button class="priority-btn low" onclick="changePriority('low')">ğŸŸ¢ Basse</button>
        </div>
        <div class="modal-btns"><button class="btn-secondary" onclick="closeEventDetail()">Fermer</button></div>
    </div>
</div>

<!-- PASSWORD MODAL -->
<div class="modal" id="passwordModal">
    <div class="modal-box">
        <h3>ğŸ”’ Changer le mot de passe</h3>
        <p style="font-size:0.9rem;color:var(--text2);margin-bottom:1rem">Un code a Ã©tÃ© envoyÃ© Ã  <strong id="pwdEmail"></strong></p>
        <div class="form-group"><label>Code de vÃ©rification</label><input type="text" id="pwdCode" placeholder="123456"></div>
        <div class="form-group"><label>Nouveau mot de passe</label><input type="password" id="pwdNew" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
        <div class="modal-btns">
            <button class="btn-secondary" onclick="closeModal('passwordModal')">Annuler</button>
            <button class="btn-primary" onclick="confirmPasswordChange()">Confirmer</button>
        </div>
    </div>
</div>

<!-- VOICE MODAL -->
<div class="modal" id="voiceModal">
    <div class="modal-box">
        <h3>ğŸ¤ Enregistrement vocal</h3>
        <div class="voice-indicator">
            <div class="voice-ring"></div><div class="voice-ring delay1"></div><div class="voice-ring delay2"></div>
            <span>ğŸ¤</span>
        </div>
        <p id="voiceStatus">Parle...</p>
        <p id="voiceTranscript" class="voice-transcript"></p>
        <div class="modal-btns">
            <button class="btn-secondary" onclick="stopVoice()">Annuler</button>
            <button class="btn-primary" id="voiceConfirm" onclick="confirmVoice()" style="display:none">Utiliser ce texte</button>
        </div>
    </div>
</div>

<!-- RANK MODAL -->
<div class="modal" id="rankModal" onclick="if(event.target===this)closeRankModal()">
    <div class="modal-box" style="max-width:420px">
        <h3 style="margin-bottom:1.25rem">ğŸ† Tous les Rangs</h3>
        <div id="rankModalContent"></div>
        <div class="modal-btns" style="margin-top:1.25rem">
            <button class="btn-secondary" onclick="closeRankModal()">Fermer</button>
        </div>
    </div>
</div>

<!-- XP Popup -->
<div class="xp-popup" id="xpPopup"></div>

<!-- Toast -->
<div class="toast" id="toast"><span class="toast-icon">âœ¨</span><span id="toastMsg"></span></div>

<!-- Loading -->
<div class="loading" id="loading">
    <div class="loading-inner"><div class="loading-ring"></div><p>Chronos analyse ta demande...</p></div>
</div>

<script src="script.js"></script>
</body>
</html>
